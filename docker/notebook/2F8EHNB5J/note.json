{
  "paragraphs": [
    {
      "text": "%md\n# Building Your First Structured Streaming App\n1. We want to read a stream of show ids from Redis and label the show as safe or not for kids\n2. We will create a transformation pipeline that will extract our Movie metadata (ETL - for each row)\n3. We will then transform this data using our fitted Pipeline\n4. We will then feed the transformed data through our saved Model\n5. Lastly, we will see what is kid safe or not.\n",
      "user": "anonymous",
      "dateUpdated": "2020-04-26 23:31:09.164",
      "config": {
        "colWidth": 12.0,
        "fontSize": 9.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true,
          "completionKey": "TAB",
          "completionSupport": false
        },
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "tableHide": false
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cdiv class\u003d\"markdown-body\"\u003e\n\u003ch1\u003eBuilding Your First Structured Streaming App\u003c/h1\u003e\n\u003col\u003e\n  \u003cli\u003eWe want to read a stream of show ids from Redis and label the show as safe or not for kids\u003c/li\u003e\n  \u003cli\u003eWe will create a transformation pipeline that will extract our Movie metadata (ETL - for each row)\u003c/li\u003e\n  \u003cli\u003eWe will then transform this data using our fitted Pipeline\u003c/li\u003e\n  \u003cli\u003eWe will then feed the transformed data through our saved Model\u003c/li\u003e\n  \u003cli\u003eLastly, we will see what is kid safe or not.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1586904834595_-1407457828",
      "id": "20200414-225354_899057019",
      "dateCreated": "2020-04-14 22:53:54.596",
      "dateStarted": "2020-04-26 23:31:09.164",
      "dateFinished": "2020-04-26 23:31:09.180",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n# Alas we have outgrown where we can go with Zeppelin. Streaming requires more of a controlled environment.\n\nPlease Head over to: https://github.com/newfront/odsc-east-2020-decision-intelligence/tree/master/spark-structured-streaming\n",
      "user": "anonymous",
      "dateUpdated": "2020-04-15 02:44:22.954",
      "config": {
        "colWidth": 12.0,
        "fontSize": 9.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true,
          "completionKey": "TAB",
          "completionSupport": false
        },
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "tableHide": false
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cdiv class\u003d\"markdown-body\"\u003e\n\u003ch1\u003eAlas we have outgrown where we can go with Zeppelin. Streaming requires more of a controlled environment.\u003c/h1\u003e\n\u003cp\u003ePlease Head over to: \u003ca href\u003d\"https://github.com/newfront/odsc-east-2020-decision-intelligence/tree/master/spark-structured-streaming\"\u003ehttps://github.com/newfront/odsc-east-2020-decision-intelligence/tree/master/spark-structured-streaming\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1586905472586_-838608092",
      "id": "20200414-230432_64230760",
      "dateCreated": "2020-04-14 23:04:32.586",
      "dateStarted": "2020-04-15 02:44:22.959",
      "dateFinished": "2020-04-15 02:44:22.969",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%spark\n/*v1:movies:test:kidSafe:predict:80196367*/\n/* \"v1:movies:test:kidSafe:predict:80196367\" \"rating\" \"TV-MA\" \"category\" \"Thrillers\" \"prediction\" \"-9.175785295154684E-4\" */\n\nval predictionsFromStream \u003d \"`show_id` BIGINT, `rating` STRING, `category` STRING, `prediction` Double\"\nval predictionsSchema \u003d StructType.fromDDL(predictionsFromStream)\n\nval predictions \u003d spark.read\n  .format(\"org.apache.spark.sql.redis\")\n  .schema(predictionsSchema)\n  .option(\"key.column\", \"show_id\")\n  .option(\"table\", \"v1:movies:test:kidSafe:predict\")\n  .load()\n\npredictions.createOrReplaceTempView(\"predictions\")",
      "user": "anonymous",
      "dateUpdated": "2020-04-26 23:24:31.379",
      "config": {
        "colWidth": 12.0,
        "fontSize": 9.0,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "scala",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "predictionsFromStream: String \u003d `show_id` BIGINT, `rating` STRING, `category` STRING, `prediction` Double\npredictionsSchema: org.apache.spark.sql.types.StructType \u003d StructType(StructField(show_id,LongType,true), StructField(rating,StringType,true), StructField(category,StringType,true), StructField(prediction,DoubleType,true))\npredictions: org.apache.spark.sql.DataFrame \u003d [show_id: bigint, rating: string ... 2 more fields]\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1586918662927_1585624375",
      "id": "20200415-024422_1643695131",
      "dateCreated": "2020-04-15 02:44:22.927",
      "dateStarted": "2020-04-26 23:24:31.396",
      "dateFinished": "2020-04-26 23:24:32.190",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%sql\nselect * from predictions",
      "user": "anonymous",
      "dateUpdated": "2020-04-26 23:30:09.563",
      "config": {
        "colWidth": 12.0,
        "fontSize": 9.0,
        "enabled": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "show_id": "string",
                      "rating": "string",
                      "category": "string",
                      "prediction": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "editorMode": "ace/mode/sql"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "show_id\trating\tcategory\tprediction\n81020728\tTV-PG\tTV Comedies\t0.005278283774816175\n80115338\tTV-Y\tKids\u0027 TV\t0.9934457482710757\n80196367\tTV-MA\tThrillers\t-9.175785295154684E-4\n"
          },
          {
            "type": "TEXT",
            "data": ""
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1587943256192_1338669003",
      "id": "20200426-232056_647770475",
      "dateCreated": "2020-04-26 23:20:56.192",
      "dateStarted": "2020-04-26 23:30:09.584",
      "dateFinished": "2020-04-26 23:30:09.814",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%sql\n",
      "user": "anonymous",
      "dateUpdated": "2020-04-26 23:21:32.557",
      "config": {},
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "jobName": "paragraph_1587943292556_2066902166",
      "id": "20200426-232132_1386308780",
      "dateCreated": "2020-04-26 23:21:32.556",
      "status": "READY",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "5-StreamingPredictions",
  "id": "2F8EHNB5J",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "md:shared_process": [],
    "spark:shared_process": []
  },
  "config": {
    "isZeppelinNotebookCronEnable": false
  },
  "info": {}
}